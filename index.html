<html>
	<head>

	</head>
	<body>
		<p>Single loop<span id="a"></span></p>
		<p>divided loop<span id="b"></span></p>
		<p>Normal Swapped loop<span id="c"></span></p>
		<p>Nested Loop<span id="d"></span></p>
		<p>Block Nested Loop<span id="e"></span></p>

	</body>
    <script>
		console.log('single loop');

        
		function Employee (){
			this.id=1;
		}
        
        //===============================================Single Loop Test =====================================>
		var array = new Array(2000);
		for (var i = 0; i < array.length;  i = i + 1) {
		   array[i]=new Employee();
		}

		function nestedBlockedLoop(){

		var start = performance.now();
		for (var i = 0; i < array.length;  i = i + 5) {
		 array[i].id = i;
		 array[i + 1].id = i + 1;
		 array[i + 2].id = i + 2;
		 array[i + 3].id = i + 3;
		 array[i + 4].id = i + 4;
		}
		return performance.now() - start;
		}
		function nestedLoop(){
			
		var start = performance.now();
		for (var i = 0; i < array.length;  i = i + 1) {
		 array[i].id = i;
		}
		return performance.now() - start;

		}





        //===============================================Nested Loop Test =====================================>

		var columns =2000;
		var rows=16;
		var ar = new Array(rows);

		for(var i =0;i<rows;i++){
		   ar[i]=new Array(columns);
		   for(var j=0;j<columns;j++){
				ar[i][j]=new Employee();
		   }
		}
 
        var ar1 = new Array(columns);
        var ar2 = new Array(columns);
        var cols = 2000;
        for(var j=0;j<cols;j++){
		  ar1[j]=new Employee();
		  ar2[j]=new Employee();
		}
        
		function normalLoop () {
		var start=performance.now();
		for(var i=0;i<columns;i++){
		     for(var j=0;j<rows;j++){
		     ar[j][i].id= 1;
		    }
		}
		return (performance.now()-start);
		}

		function normalSwappedLoop () {
		var start=performance.now();
		for(var i=0;i<rows;i++){
		     for(var j=0;j<columns;j++){
		     ar[i][j].id= 1;
		    }
		}
		return (performance.now()-start);
		}

        function nestedLoop () {
		var start=performance.now();
		var sum =0;

		for(var i=0;i<cols;i++){
		     for(var j=0;j<cols;j++){
		      if (ar1[i].id == ar2[j].id){
                  sum++;
		      }
		    }
		}
		return (performance.now()-start);
		}

        function nestedBlockedLoop () {
		var start = performance.now();
		var sum=0;
		  for(var bk=0; bk<Math.ceil(columns/1000); bk++){
			  for(var i = 0; i < columns; i++) {
			    for(var j = bk*1000; j < (bk+1)*1000; j++) {
					 if (ar1[i].id == ar2[j].id){
		                  sum+=1;
				      }
				}
			  }
		   }
		  return performance.now() - start;
		}

		function dividedLoop() {
		  var start = performance.now();
		  var updateStep = 4;
		  for(var i = 0; i < rows; i += updateStep) {
		    for(var j = 0; j < columns; j++) {
		      ar[i][j].id= j;
		      ar[i + 1][j].id= j;
		      ar[i + 2][j].id= j;
		      ar[i + 3][j].id= j;
		    }
		  }
		  return performance.now() - start;
		}

		var single=0, divided =0, nested=0, blocknested=0, swapped=0;
		for (var i=1;i<=200;i++){
			blocknested += nestedBlockedLoop();
			nested += nestedLoop();


			single+=normalLoop();
			divided+=dividedLoop();
            swapped+=normalSwappedLoop();
			single+=normalLoop();
			divided+=dividedLoop();
			swapped+=normalSwappedLoop();

			swapped+=normalSwappedLoop();
			divided+=dividedLoop();
			single+=normalLoop();

			swapped+=normalSwappedLoop();
			divided+=dividedLoop();
			single+=normalLoop();

			swapped+=normalSwappedLoop();
			divided+=dividedLoop();
			single+=normalLoop();

			single+=normalLoop();
			divided+=dividedLoop();
			swapped+=normalSwappedLoop();
			nested += nestedLoop();
			blocknested += nestedBlockedLoop();
		}

		/*single/=120;
		enumer/=120;
		divided/=120;*/
		document.getElementById('a').innerHTML = " = "+single;
		document.getElementById('b').innerHTML = " = "+divided;
		document.getElementById('c').innerHTML = " = "+swapped;
		document.getElementById('d').innerHTML = " = "+nested;
		document.getElementById('e').innerHTML = " = "+blocknested;
	</script>
</html>
